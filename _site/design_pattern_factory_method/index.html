<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>设计模式演练——工厂方法模式 – BOB BLOG</title>
    <meta name="description" content="       Contents    ">
    <meta name="keywords" content="">
    <link rel="canonical" href="http://bowie.site/design_pattern_factory_method/">
        <!-- Twitter Cards -->
    <meta name="twitter:title" content="设计模式演练——工厂方法模式">
    <meta name="twitter:description" content="       Contents    ">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://bowie.site/assets/img/Logo.png">
    <!-- Open Graph -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="设计模式演练——工厂方法模式">
    <meta property="og:description" content="       Contents    ">
    <meta property="og:url" content="http://bowie.site/design_pattern_factory_method/">
    <meta property="og:site_name" content="BOB BLOG">
    <meta property="og:image" content="http://bowie.site/assets/img/Logo.png">

    
    
    <!-- Handheld -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://bowie.site/assets/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://bowie.site/assets/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://bowie.site/assets/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://bowie.site/assets/img/favicon/apple-touch-icon-144x144.png">
    <link rel="icon" type="image/png" href="http://bowie.site/assets/img/favicon/favicon.png">
    <link rel="shortcut icon" href="http://bowie.site/assets/img/favicon/favicon.ico">
    <!-- Feed -->
    <link rel="alternate" type="application/rss+xml" title="BOB BLOG" href="http://bowie.site/feed.xml">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="http://bowie.site/assets/css/main.css">
</head>


<body>
        <nav class="nav">
        <ul class="list">
            
				    
				    <li class="item"><a class="link" href="http://bowie.site/">Home</a></li>
				
				    
				    <li class="item"><a class="link" href="http://bowie.site/blog/">Blog</a></li>
				
				    
				    <li class="item"><a class="link" href="http://bowie.site/projects/">Projects</a></li>
				
				    
				    <li class="item"><a class="link" href="http://bowie.site/about/">About</a></li>
				
        </ul>
    </nav>

    <div class="wrapper">
        <div class="title">
            <h1>设计模式演练——工厂方法模式</h1>
            <h4>28 Mar 2016</h4>
        </div>
        <div class="article">
            <section id="table-of-contents" class="toc">
  <header>
    <h3>
<i class="fa fa-book"></i> Contents</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#c" id="markdown-toc-c">1.小C的故事</a></li>
  <li><a href="#section" id="markdown-toc-section">2.存在的问题</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">3.工厂方法模式登场</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">4.解决了什么，失去了什么</a></li>
  <li><a href="#section-3" id="markdown-toc-section-3">5.具体应用场景</a></li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<h3 id="c">1.小C的故事</h3>

<p>       大家好，我叫张小C，我是一个厨师，专职烤面包。下面是我的工作。</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">World</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">LittleC</span> <span class="n">littleC</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LittleC</span><span class="o">();</span>
		<span class="n">littleC</span><span class="o">.</span><span class="na">work</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LittleC</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="n">work</span><span class="o">()</span> <span class="o">{</span>
		   <span class="n">Bread</span> <span class="n">bread</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bread</span><span class="o">();</span>
		   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">bread</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span><span class="s">"做好了！"</span><span class="o">);</span>
		   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bread</span><span class="o">.</span><span class="na">getTaste</span><span class="o">());</span>
		 <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bread</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"面包"</span><span class="o">;</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getTaste</span><span class="o">(){</span>
		<span class="k">return</span> <span class="s">"软软的，没什么味道"</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>有一天，小明（老顾客）来到张小c的店中，以下是对话－－－ <br>
小明：我吃你家面包都吃腻了，有没有别的吃的，没有的话我以后就换地方了。  <br>
小C：有有有，我马上做别的美味出来。</p>

<p>小C心想，我只会烤面包啊，该咋办，难不成再加个workForPizza，那要是这个也吃腻了总不能加到屎吧…况且我脑子笨，学得慢…好吧，爱吃不吃，你不吃自有人吃！（纯属意淫）</p>

<h3 id="section">2.存在的问题</h3>
<p>现在让我们来看一看小C现在面临的问题是什么，先看看work方法中直接new了一个Bread，把自己禁锢在了一种食物中。那有没有什么办法可以解决小c的当前困境呢？</p>

<h3 id="section-1">3.工厂方法模式登场</h3>
<p>小强:小C，我最近开了一个Pizza店，什么时候过来吃Pizza啊？ <br>
小C:太好了，我正愁呢。这样咱们合作，顾客在我这里点Pizza的时候，你们店就给我做一个Pizza送过来。互利共赢嘛。 <br>
小强：好，一言为定。 <br>
也许最近流行开餐馆，小C的朋友小梅开了家饺子馆，小C用同样的方法让小梅加盟了。 而且为了专心运营，连自己的烤面包工作都外包给小红的面包店了。   <br>
经过酝酿，新的设计出现了：
<img src="../assets/img/design_pattern/factory_method/factory_mothod_1.png">
下面是代码摘要：</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">World</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">LittleC</span> <span class="n">littleC</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LittleC</span><span class="o">();</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"小明：我要吃面包！"</span><span class="o">);</span>
		<span class="n">littleC</span><span class="o">.</span><span class="na">setFoodShop</span><span class="o">(</span><span class="k">new</span> <span class="n">BreadShop</span><span class="o">());</span>
		<span class="n">littleC</span><span class="o">.</span><span class="na">work</span><span class="o">();</span>

		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"小明：我要吃饺子！"</span><span class="o">);</span>
		<span class="n">littleC</span><span class="o">.</span><span class="na">setFoodShop</span><span class="o">(</span><span class="k">new</span> <span class="n">DumplingShop</span><span class="o">());</span>
		<span class="n">littleC</span><span class="o">.</span><span class="na">work</span><span class="o">();</span>

		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"小明：我要吃披萨！"</span><span class="o">);</span>
		<span class="n">littleC</span><span class="o">.</span><span class="na">setFoodShop</span><span class="o">(</span><span class="k">new</span> <span class="n">PizzaShop</span><span class="o">());</span>
		<span class="n">littleC</span><span class="o">.</span><span class="na">work</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * 小C
 * 
 * @author bob
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LittleC</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">FoodShop</span> <span class="n">foodShop</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setFoodShop</span><span class="o">(</span><span class="n">FoodShop</span> <span class="n">foodShop</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">foodShop</span> <span class="o">=</span> <span class="n">foodShop</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">work</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Food</span> <span class="n">food</span> <span class="o">=</span> <span class="n">foodShop</span><span class="o">.</span><span class="na">createFood</span><span class="o">();</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">food</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"做好了！"</span><span class="o">);</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">food</span><span class="o">.</span><span class="na">getTaste</span><span class="o">());</span>
	<span class="o">}</span>
<span class="o">}</span> 

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Food</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="n">getName</span><span class="o">();</span>

	<span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="n">getTaste</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">FoodShop</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">abstract</span> <span class="n">Food</span> <span class="n">createFood</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bread</span> <span class="kd">extends</span> <span class="n">Food</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"面包"</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getTaste</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"软软的，很清淡"</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BreadShop</span> <span class="kd">extends</span> <span class="n">FoodShop</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="n">Food</span> <span class="n">createFood</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="n">Bread</span><span class="o">();</span>
	<span class="o">}</span>

<span class="o">}</span> </code></pre></figure>

<h3 id="section-2">4.解决了什么，失去了什么</h3>
<p>通过引入工厂方法模式我们解决了，Bread硬编码到LittleC中导致的扩展受限问题。小C以后可以接入各种各样的菜色而不需要改动既有代码（world除外）。 <br>
缺点也是很明显，我为了一个菜色还要加一个餐馆进来。这里可以通过带有参数到工厂方法来优化这种情况。创造一个什么菜都可以生产的餐馆，比如根据类型完整名称就可以得到具体的食物，那么只需要一个餐馆就可以了。</p>

<h3 id="section-3">5.具体应用场景</h3>
<p>所有需要new一个对象的地方，同时要求有足够的灵活性。</p>

        </div>
    </div>
        <div class="footer">
        BOB BLOG © 2016 <a href="http://bowie.site/feed.xml" target="_blank"><i class="fa fa-fw fa-feed"></i></a>
    </div>

    <script src="http://bowie.site/assets/js/jquery-1.12.2.min.js"></script>
<script src="http://bowie.site/assets/js/jquery.goup.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $.goup({
        trigger: 500,
        bottomOffset: 10,
        locationOffset: 20,
        containerRadius: 0,
        containerColor: '#fff',
        arrowColor: '#000',
        goupSpeed: 'normal'
    });
});
</script>


</body>
</html>
