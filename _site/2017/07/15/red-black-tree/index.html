<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords"  content="这个莫非是TAG,试试看">
    <meta name="theme-color" content="#000000">
    
    <title>红黑树 - Bob的博客 | Bob Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://bob1024.com/2017/07/15/red-black-tree/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Bob Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <!--
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    <li>
                        <a href="/portfolio/">Portfolio</a>
                    </li>
                    
                    <li>
                        <a href="/tags/">Tags</a>
                    </li>
                    -->
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/home-bg.jpg" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/home-bg.jpg')
    }

    
</style>
<header class="intro-header" >
    <div class="header-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#红黑树" title="红黑树">红黑树</a>
                        
                    </div>
                    <h1>红黑树</h1>
                    
                    
                    <h2 class="subheading"></h2>
                    
                    <span class="meta">Posted by Bob Blog on July 15, 2017</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

				<section id="table-of-contents" class="toc">
  <header>
    <h3><i class="fa fa-book"></i> Contents</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">红黑树</a>    <ul>
      <li><a href="#section-1" id="markdown-toc-section-1">1.红黑树的定义</a></li>
      <li><a href="#section-2" id="markdown-toc-section-2">2.红黑树操作简单例子</a>        <ul>
          <li><a href="#step-1-44" id="markdown-toc-step-1-44">step 1 插入节点（44）</a></li>
          <li><a href="#step-2-45" id="markdown-toc-step-2-45">step 2 插入节点（45）</a></li>
          <li><a href="#step-3-46" id="markdown-toc-step-3-46">step 3 插入节点（46）</a></li>
          <li><a href="#step-4-47" id="markdown-toc-step-4-47">step 4 插入节点（47）</a></li>
          <li><a href="#step5-45" id="markdown-toc-step5-45">step5 删除节点（45）</a></li>
        </ul>
      </li>
      <li><a href="#section-3" id="markdown-toc-section-3">3.红黑树代码实现</a>        <ul>
          <li><a href="#font-colorblue246" id="markdown-toc-font-colorblue246"><font color="blue">插入修复情形2:插入的节点的父节点是黑色的，这种情况下直接插入红色节点。（如图：插入节点46）</font></a></li>
          <li><a href="#font-colorblue3-" id="markdown-toc-font-colorblue3-"><font color="blue">插入修复情形3: 插入的节点父节点以及叔父节点都是红色。</font></a></li>
          <li><a href="#font-colorblue44347445060" id="markdown-toc-font-colorblue44347445060"><font color="blue">插入修复情形4:节点是父节点的右孩子（如图4.3中节点47），其父节点（44）是其祖父节点（50）的左孩子，其叔父节点是黑色（节点60）。</font></a></li>
          <li><a href="#font-colorblue5" id="markdown-toc-font-colorblue5"><font color="blue">插入修复情形5:节点是父节点的左孩子，父节点是祖父节点的左孩子，叔父节点是黑色。</font></a></li>
          <li><a href="#section-4" id="markdown-toc-section-4">3.2 红黑树删除操作</a></li>
          <li><a href="#font-colorblue221s21" id="markdown-toc-font-colorblue221s21"><font color="blue">删除修复情形2:如图2.1，兄弟节点（S）是红色。如图2.1</font></a></li>
          <li><a href="#font-colorblue331nps" id="markdown-toc-font-colorblue331nps"><font color="blue">删除修复情形3:如图3.1，节点（N）、父节点（P）、兄弟节点（S）都是黑色。</font></a></li>
          <li><a href="#font-colorblue4" id="markdown-toc-font-colorblue4"><font color="blue">删除修复情形4:节点和兄弟节点都是黑色，父节点是红色。</font></a></li>
          <li><a href="#font-colorblue--5" id="markdown-toc-font-colorblue--5"><font color="blue">  删除修复情形5:节点的兄弟节点是黑色，兄弟节点的左孩子是红色，右孩子是黑色。</font></a></li>
          <li><a href="#font-colorblue--661s" id="markdown-toc-font-colorblue--661s"><font color="blue">  删除修复情形6:节点是父节点的左孩子，其兄弟节点（图6.1中S节点）是黑色，并且兄弟节点的右孩子是红色节点。</font></a></li>
        </ul>
      </li>
      <li><a href="#java" id="markdown-toc-java">4.红黑树Java实现完整代码</a></li>
      <li><a href="#section-5" id="markdown-toc-section-5">5.红黑树具体应用</a></li>
    </ul>
  </li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<h1 id="section">红黑树</h1>

<h4 id="section-1">1.红黑树的定义</h4>
<p>红黑树是平衡二叉查找树（Balance Search Tree）的一种，它拥有良好的最坏运行时间，可以保证查找、删除、添加节点操作在O(log n)时间内，其中n表示节点数。</p>

<blockquote>
  <p>红黑树每个节点都带有颜色属性，红色或者黑色，除了BST的性质以外，还有以下性质：<br />
1. 节点是红色或黑色。 <br />
2. 根是黑色。 <br />
3. 所有叶子都是黑色（叶子是NIL节点）。 <br />
4. 每个红色节点必须有两个黑色的子节点。（从每个叶子到根的所有路径上不能有两个连续的红色节点。）  <br />
5. 从任一节点到其每个叶子的所有简单路径都包含相同数目的黑色节点。</p>
</blockquote>

<p>下面是一棵红黑树的例子，例子中为中序遍历降序排列，后面的操作中也按照这个顺序。<br />
<img src="/img/in-post/red_black_tree/demo.png" alt="Alt text" /> <br />
例子中以节点48作为参考节点，类比人类社会，将47节点叫做它的父节点，46叫做它的祖父节点，45叫做它的叔父节点。</p>

<h4 id="section-2">2.红黑树操作简单例子</h4>

<h6 id="step-1-44">step 1 插入节点（44）</h6>
<p>因为第一个节点是根节点，根据性质2，节点为黑色。<br />
<img src="/img/in-post/red_black_tree/insert_step_1.png" alt="Alt text" /></p>

<h6 id="step-2-45">step 2 插入节点（45）</h6>
<p>由于45大于44，所以作为节点44的右边孩子接入并设置为红色。可以看到性质5得到了保持。    <br />
<img src="/img/in-post/red_black_tree/insert_step_2.png" alt="Alt text" /></p>

<h6 id="step-3-46">step 3 插入节点（46）</h6>
<p>46大于节点45应该作为右孩子接入设置为红色。显然违反了性质4<br />
<img src="/img/in-post/red_black_tree/insert_step_3_1.png" alt="Alt text" /> <br />
以节点45为轴做左旋转,违反了性质2、4、5。  <br />
<img src="/img/in-post/red_black_tree/insert_step_3_2.png" alt="Alt text" /><br />
 将45改为黑色（符合了性质2、4），将节点44改为红色（符合性质5）？？事实上我也可以将46节点涂成黑色？？得到全黑色节点 <br />
<img src="/img/in-post/red_black_tree/insert_step_3_3.png" alt="Alt text" /></p>

<h6 id="step-4-47">step 4 插入节点（47）</h6>
<p>47大于节点46作为右孩子接入设置为红色。违反了性质4。<br />
<img src="/img/in-post/red_black_tree/insert_step_4_1.png" alt="Alt text" /> <br />
这个时候47的父节点46与叔父节点都是红色 ，则祖父节点45颜色下降。但仍然违反性质2，因为47的祖父节点45是根节点。  <br />
<img src="/img/in-post/red_black_tree/insert_step_4_2.png" alt="Alt text" />  <br />
将45颜色变为黑色。 <br />
<img src="/img/in-post/red_black_tree/insert_step_4_3.png" alt="Alt text" /></p>

<h6 id="step5-45">step5 删除节点（45）</h6>
<p>要删除节点45，首先将其左子树中最大节点44。 <br />
<img src="/img/in-post/red_black_tree/insert_step_5_1.png" alt="Alt text" /> <br />
将44节点的值拷贝到45节点处，移除老的44节点。此时违反了性质5。 <br />
<img src="/img/in-post/red_black_tree/insert_step_5_2.png" alt="Alt text" />  <br />
以46节点为轴进行坐旋转。但仍然违反性质5。 <br />
<img src="/img/in-post/red_black_tree/insert_step_5_3.png" alt="Alt text" /> <br />
将47节点设置为黑色。 <br />
<img src="/img/in-post/red_black_tree/insert_step_5_4.png" alt="Alt text" /></p>

<h4 id="section-3">3.红黑树代码实现</h4>
<p>上面简单例子中插入以及删除节点操作并没有完全涵盖所有的情况。下面来看一看红黑树java代码实现。根据具体每一类情况，形成与之对应的代码操作。下面情况对应的配图都在对应情况的下方，比如有两个图3.1，分别对应前面小标题。
##### 3.1 红黑树插入操作</p>

<p>红黑树是BST（Binary Search Tree，二叉查找树），除了需要执行BST的插入操作以外还要根据红黑树的性质进行调整，因为直接插入节点有可能会破坏红黑树的结构。红黑树插入节点都按照红色插入。（维基百科解释：如果设为黑色，就会导致根到叶子的路径上有一条路上，多一个额外的黑节点，这个是很难调整的。但是设为红色节点后，可能会导致出现两个连续红色节点的冲突，那么可以通过颜色调换和树旋转来调整。）
。关于插入后的恢复情形有下面5种。
##### <font color="blue">插入修复情形1:之前是棵空树，新插入的节点是树根。根据性质2，根节点必须是黑色。
</font> <br />
<img src="/img/in-post/red_black_tree/insert_condition_1.png" alt="Alt text" /> （图1）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">   
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">insertFixUpCase1</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//情形1:如果插入节点是根节点，则设置为黑色</span>
            <span class="n">root</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
            <span class="n">node</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">insertFixUpCase2</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span></code></pre></figure>

<h5 id="font-colorblue246"><font color="blue">插入修复情形2:插入的节点的父节点是黑色的，这种情况下直接插入红色节点。（如图：插入节点46）</font></h5>
<p>&lt;/font&gt;
<img src="/img/in-post/red_black_tree/insert_condition_2_1.png" alt="Alt text" />（图2.1） <br />
<img src="/img/in-post/red_black_tree/insert_condition_2_2.png" alt="Alt text" />（图2.2）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
   <span class="kd">private</span> <span class="kt">void</span> <span class="nf">insertFixUpCase2</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//父节点是黑色</span>
            <span class="c1">//情形2：如果父节点是黑色的，所有性质都没有受到影响</span>
            <span class="c1">//不需要做什么</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">insertFixUpCase3</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span> </code></pre></figure>

<h5 id="font-colorblue3-"><font color="blue">插入修复情形3: 插入的节点父节点以及叔父节点都是红色。</font></h5>
<p>从图3.1为插入前状态，插入节点42后成为节点43的左孩子，这时性质4遭到破坏，因为存在连续红色节点（图3.2）。要满足性质4需要将祖父节点（44）与父节点、叔父节点的颜色进行交换，如图3.3。性质2此时无法满足因为根节点44是红色。其实给出图片的例子中44是一个根节点，很多情况中44并不是根节点。此时将44按照新插入的节点从情形1开始处理，那么应该涂成黑色，如图3.4
&lt;/font&gt;
<img src="/img/in-post/red_black_tree/insert_condition_3_1.png" alt="Alt text" />（图3.1） <br />
<img src="/img/in-post/red_black_tree/insert_condition_3_2.png" alt="Alt text" />（图3.2） <br />
<img src="/img/in-post/red_black_tree/insert_condition_3_3.png" alt="Alt text" />（图3.3）<br />
<img src="/img/in-post/red_black_tree/insert_condition_3_4.png" alt="Alt text" />（图3.4）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">insertFixUpCase3</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//父节点是红色</span>

        <span class="n">Node</span> <span class="n">uncleNode</span> <span class="o">=</span> <span class="n">getUncleNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">uncleNode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">uncleNode</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//叔父节点是红色</span>
            <span class="c1">//情形3:父节点和叔父节点都是红色。这种情况下，我们需要将祖父节点的颜色下沉一层，即祖父节点变成红色，父节点和叔父变成黑色。</span>


            <span class="n">uncleNode</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
            <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>

            <span class="n">getGrandparentNode</span><span class="o">(</span><span class="n">node</span><span class="o">).</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>

            <span class="c1">//调整</span>
            <span class="n">insertFixUpCase1</span><span class="o">(</span><span class="n">getGrandparentNode</span><span class="o">(</span><span class="n">node</span><span class="o">));</span>


        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">//叔父节点是黑色</span>
            <span class="c1">//情形4：父节点是红色，叔父节点是黑色，祖父节点肯定是黑色的，要不然就违反了红黑树不能连续红色节点的性质</span>
            <span class="n">insertFixUpCase4</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>


    <span class="o">}</span></code></pre></figure>

<h5 id="font-colorblue44347445060"><font color="blue">插入修复情形4:节点是父节点的右孩子（如图4.3中节点47），其父节点（44）是其祖父节点（50）的左孩子，其叔父节点是黑色（节点60）。</font></h5>
<p>这种情况的对称情况也属于同一情况。下面来看一下这种情形是怎么出现的，图4.1是初始状态，插入节点45，红色，图4.1到4.3这个过程实际上是情形3的处理过程。从4.3到4.4才是情形4的场景，这种情况下以新插入节点（这里是47）作为旋转轴做一次左旋转，对称的情况做右旋转。此时红黑树的性质5仍然没有满足，下面交给情形5处理。
&lt;/font&gt; <br />
<img src="/img/in-post/red_black_tree/insert_condition_4_1.png" alt="Alt text" />（图4.1）<br />
<img src="/img/in-post/red_black_tree/insert_condition_4_2.png" alt="Alt text" />（图4.2）
<img src="/img/in-post/red_black_tree/insert_condition_4_3.png" alt="Alt text" />（图4.3）
<img src="/img/in-post/red_black_tree/insert_condition_4_4.png" alt="Alt text" />（图4.4）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">insertFixUpCase4</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>

       <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">leftChild</span> <span class="o">==</span> <span class="n">node</span> <span class="o">&amp;&amp;</span> <span class="n">getGrandparentNode</span><span class="o">(</span><span class="n">node</span><span class="o">).</span><span class="na">rightChild</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">)</span> <span class="o">{</span>

            <span class="n">rotateRight</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">rightChild</span> <span class="o">==</span> <span class="n">node</span> <span class="o">&amp;&amp;</span> <span class="n">getGrandparentNode</span><span class="o">(</span><span class="n">node</span><span class="o">).</span><span class="na">leftChild</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">rotateLeft</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">insertFixUpCase5</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<h5 id="font-colorblue5"><font color="blue">插入修复情形5:节点是父节点的左孩子，父节点是祖父节点的左孩子，叔父节点是黑色。</font></h5>
<p>我们直接看图5.1（实际上和图4.4是一张图，想知道来龙去脉可以看这里）。此时性质5被破坏，我们先以节点47为轴做右旋转得到图5.2，再将原先父节点（节点47）与原先祖父节点（节点50）颜色进行交换，完成，如图5.3。
&lt;/font&gt; <br />
<img src="/img/in-post/red_black_tree/insert_condition_5_1.png" alt="Alt text" />（图5.1）<br />
<img src="/img/in-post/red_black_tree/insert_condition_5_2.png" alt="Alt text" />（图5.2）
<img src="/img/in-post/red_black_tree/insert_condition_5_3.png" alt="Alt text" />（图5.3）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">insertFixUpCase5</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
        <span class="n">getGrandparentNode</span><span class="o">(</span><span class="n">node</span><span class="o">).</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">leftChild</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">==</span> <span class="n">getGrandparentNode</span><span class="o">(</span><span class="n">node</span><span class="o">).</span><span class="na">leftChild</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">rotateRight</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">rotateLeft</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<h5 id="section-4">3.2 红黑树删除操作</h5>

<p>同样删除操作除了需要执行BST的删除操作以外还要根据红黑树的性质进行调整。关于删除后的恢复情形有下面6种。<br />
##### <font color="blue">删除修复情形1:节点是新的根。   
图1.1是删除前的初始状态，要删除节点44，找到节点44对它进行删除，从节点44左孩子中寻找最大那个节点（这里左孩子是叶子节点）将内容替换到原节点44。因为删除的节点是黑色节点所以性质5被破坏。在情形1之前，这里先遇到了情形3（图1.2-1.3），节点46变换成红色节点，紧接着还是情形3，节点53也要改成红色节点（图1.3-1.4）。情形1出现了。。。节点48是根节点，且是黑色，什么都不需要做。
</font><br />
<img src="/img/in-post/red_black_tree/delete_condition_1_1.png" alt="Alt text" />（图1.1）<br />
<img src="/img/in-post/red_black_tree/delete_condition_1_2.png" alt="Alt text" />（图1.2）  <br />
<img src="/img/in-post/red_black_tree/delete_condition_1_3.png" alt="Alt text" />（图1.3） <br />
<img src="/img/in-post/red_black_tree/delete_condition_1_4.png" alt="Alt text" />（图1.4）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> <span class="kd">private</span> <span class="kt">void</span> <span class="nf">deleteFixUpCase1</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//情形1：node是新的根</span>

        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">deleteFixUpCase2</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span></code></pre></figure>

<h5 id="font-colorblue221s21"><font color="blue">删除修复情形2:如图2.1，兄弟节点（S）是红色。如图2.1</font></h5>
<p>这种情况下以兄弟节点S为转轴做一次左旋转，并将原父节点（P）与原兄弟节点（S）颜色做一下交换。在真实中的例子情参看情形4的例子。</p>

<p>&lt;/font&gt;<br />
<img src="/img/in-post/red_black_tree/delete_condition_2_1.png" alt="Alt text" />（图2.1）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> <span class="kd">private</span> <span class="kt">void</span> <span class="nf">deleteFixUpCase2</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">Node</span> <span class="n">sib</span> <span class="o">=</span> <span class="n">sibling</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
        <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>
        
        <span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">leftChild</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">rotateLeft</span><span class="o">(</span><span class="n">sib</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">rotateRight</span><span class="o">(</span><span class="n">sib</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">deleteFixUpCase3</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>

    <span class="o">}</span></code></pre></figure>

<h5 id="font-colorblue331nps"><font color="blue">删除修复情形3:如图3.1，节点（N）、父节点（P）、兄弟节点（S）都是黑色。</font></h5>
<p>这时我们将兄弟节点颜色设置为红色。
&lt;/font&gt;<br />
<img src="/img/in-post/red_black_tree/delete_condition_3_1.png" alt="Alt text" />（图3.1）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">deleteFixUpCase3</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Node</span> <span class="n">sib</span> <span class="o">=</span> <span class="n">sibling</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">sib</span> <span class="o">!=</span> <span class="kc">null</span>
                <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">leftChild</span> <span class="o">!=</span> <span class="kc">null</span>
                <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">rightChild</span> <span class="o">!=</span> <span class="kc">null</span>
                <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span>
                <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span>
                <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">leftChild</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span>
                <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">rightChild</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>

            <span class="n">deleteFixUpCase1</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">deleteFixUpCase4</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<h5 id="font-colorblue4"><font color="blue">删除修复情形4:节点和兄弟节点都是黑色，父节点是红色。</font></h5>
<p>这种情况下，我们将父节点和兄弟节点的颜色进行交换。
下面演示一个例子。例子开始状态如图4.1，要删除节点49，从左侧树中选出最大的节点48的值替换到49节点，这时候如图4.4。以48节点的左子树为基准，符合情形2，以51为转轴做一次左旋转，并交换父节点（48）与兄弟节点（51）的颜色结果如图4.6。这时符合情形4，将父节点48与兄弟节点50交换颜色，转换结束如图4.7。
&lt;/font&gt;<br />
<img src="/img/in-post/red_black_tree/delete_condition_4_1.png" alt="Alt text" />（图4.1）<br />
<img src="/img/in-post/red_black_tree/delete_condition_4_2.png" alt="Alt text" />（图4.2）  <br />
<img src="/img/in-post/red_black_tree/delete_condition_4_3.png" alt="Alt text" />（图4.3） 
<img src="/img/in-post/red_black_tree/delete_condition_4_4.png" alt="Alt text" />（图4.4） 
<img src="/img/in-post/red_black_tree/delete_condition_4_5.png" alt="Alt text" />（图4.5） 
<img src="/img/in-post/red_black_tree/delete_condition_4_6.png" alt="Alt text" />（图4.6） 
<img src="/img/in-post/red_black_tree/delete_condition_4_7.png" alt="Alt text" />（图4.7）</p>

<h5 id="font-colorblue--5"><font color="blue">  删除修复情形5:节点的兄弟节点是黑色，兄弟节点的左孩子是红色，右孩子是黑色。</font></h5>
<p>如图5.1，图中只是兄弟节点部分。S即为兄弟节点。这时以兄弟节点的左孩子进行右旋转。节点对称的情况，旋转操作也是对称的。关于树旋转，我参考的是维基百科Tree Ratation中的旋转方式。情况5在真实操作中的情况可以参考情况6给出的图解。
&lt;/font&gt;<br />
<img src="/img/in-post/red_black_tree/delete_condition_5_1.png" alt="Alt text" />（图5.1）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">deleteFixUpCase5</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">Node</span> <span class="n">sib</span> <span class="o">=</span> <span class="n">sibling</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">leftChild</span>
                    <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">rightChild</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span>
                    <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">leftChild</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span>
                    <span class="o">)</span> <span class="o">{</span>

                <span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>
                <span class="n">sib</span><span class="o">.</span><span class="na">leftChild</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
                <span class="n">rotateRight</span><span class="o">(</span><span class="n">sib</span><span class="o">.</span><span class="na">leftChild</span><span class="o">);</span>

            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">rightChild</span>
                    <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">leftChild</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span>
                    <span class="o">&amp;&amp;</span> <span class="n">sib</span><span class="o">.</span><span class="na">rightChild</span><span class="o">.</span><span class="na">color</span> <span class="o">==</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">)</span> <span class="o">{</span>

                <span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>
                <span class="n">sib</span><span class="o">.</span><span class="na">rightChild</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
                <span class="n">rotateLeft</span><span class="o">(</span><span class="n">sib</span><span class="o">.</span><span class="na">rightChild</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">deleteFixUpCase6</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>

    <span class="o">}</span></code></pre></figure>

<h5 id="font-colorblue--661s"><font color="blue">  删除修复情形6:节点是父节点的左孩子，其兄弟节点（图6.1中S节点）是黑色，并且兄弟节点的右孩子是红色节点。</font></h5>
<p>这种情况下我们首先交换父节点和兄弟节点的颜色，并且将兄弟节点的右孩子颜色设置为黑色。然后以兄弟节点为旋转轴做左旋转。<br />
从图6.2开始做一个包含情况6的真实情况的例子。删除节点48如图6.3，原48处被叶子节点取代。这时满足情形5，处理后得到图6.5。情形6出现了，以节点46为转轴做一次右旋转，并且将节点46的左孩子设置为黑色。转换结束。
&lt;/font&gt;<br />
<img src="/img/in-post/red_black_tree/delete_condition_6_1.png" alt="Alt text" />（图6.1）<br />
<img src="/img/in-post/red_black_tree/delete_condition_6_2.png" alt="Alt text" />（图6.2） <br />
<img src="/img/in-post/red_black_tree/delete_condition_6_3.png" alt="Alt text" />（图6.3） <br />
<img src="/img/in-post/red_black_tree/delete_condition_6_4.png" alt="Alt text" />（图6.4）<br />
<img src="/img/in-post/red_black_tree/delete_condition_6_5.png" alt="Alt text" />（图6.5） 
<img src="/img/in-post/red_black_tree/delete_condition_6_6.png" alt="Alt text" />（图6.6） 
<img src="/img/in-post/red_black_tree/delete_condition_6_7.png" alt="Alt text" />（图6.7）</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">deleteFixUpCase6</span><span class="p">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Node</span> <span class="n">sib</span> <span class="o">=</span> <span class="n">sibling</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>

        <span class="n">sib</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">color</span><span class="o">;</span>
        <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">leftChild</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">sib</span><span class="o">.</span><span class="na">rightChild</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
            <span class="n">rotateLeft</span><span class="o">(</span><span class="n">sib</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">sib</span><span class="o">.</span><span class="na">leftChild</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>
            <span class="n">rotateRight</span><span class="o">(</span><span class="n">sib</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<h4 id="java">4.红黑树Java实现完整代码</h4>
<p>https://github.com/mingbozhang/blogcode/tree/master/algorithms/src/main/java/com/bob/datastructure/rbtree</p>

<h4 id="section-5">5.红黑树具体应用</h4>
<p>Java中的TreeMap
#### 6.参考
https://www.cs.usfca.edu/~galles/visualization/RedBlack.html <br />
https://github.com/julycoding/The-Art-Of-Programming-By-July/blob/master/ebook/zh/03.01.md
https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91
https://zh.wikipedia.org/wiki/%E6%A0%91%E6%97%8B%E8%BD%AC
https://en.wikipedia.org/wiki/Tree_rotation</p>


                <hr style="visibility: hidden;">

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/06/23/design-pattern-abstract-factory/" data-toggle="tooltip" data-placement="top" title="设计模式演练——抽象工厂模式">
                        Previous<br>
                        <span>设计模式演练——抽象工厂模式</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2017/08/13/mq/" data-toggle="tooltip" data-placement="top" title="消息队列随笔">
                        Next<br>
                        <span>消息队列随笔</span>
                        </a>
                    </li>
                    
                </ul>


                
                <!-- disqus 评论框 start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus 评论框 end -->
                

                
            </div>  

    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
        				
                            
        				
                            
                				<a href="/tags/#springMVC" title="springMVC" rel="2">
                                    springMVC
                                </a>
                            
        				
                            
        				
                            
                				<a href="/tags/#java" title="java" rel="2">
                                    java
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
        			</div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>






<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "bob1024";
    var disqus_identifier = "/2017/07/15/red-black-tree";
    var disqus_url = "https://bob1024.com/2017/07/15/red-black-tree/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus 公共JS代码 end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    

                    <!-- add Weibo, Zhihu by Hux, add target = "_blank" to <a> by Hux -->
                    
                    


                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/mingbozhang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Bob Blog 2017
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async('/js/jquery.tagcloud.js',function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-102158428-1';
    var _gaDomain = 'bob1024.com';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>



<!-- Baidu Tongji -->




<!-- Side Catalog -->




<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
